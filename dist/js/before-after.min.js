var BeforeAfter=function(){function a(a){this.handler=a,this.checkHandlerExist()&&this.checkImagesExist()&&(this.init(),this.bindEvents())}return a.prototype.init=function(){this.wrapHandler(),this.wrapImages(),this.createHandler()},a.prototype.wrapHandler=function(){var a=this.getHandler().innerHTML,b=document.createElement("div");b.className="before-after",b.innerHTML=a,this.getHandler().innerHTML=b.outerHTML},a.prototype.wrapImages=function(){for(var a=this.getImages(),b=0,c=a.length;b<c;b++)a[b].outerHTML=this.getWrappedImage(a[b].outerHTML,b)},a.prototype.getWrappedImage=function(a,b){var c=document.createElement("div");return c.className="photo",c.innerHTML=a,c.className+=0===b?" before":" after",c.outerHTML},a.prototype.createHandler=function(){var a=this.getHandler().querySelector(".before-after"),b=document.createElement("div");b.className="drag-handler",b.draggable=!0;var c=document.createElement("div");c.className="drag-element",b.appendChild(c),a.innerHTML+=b.outerHTML},a.prototype.checkHandlerExist=function(){return void 0!==this.getHandler()},a.prototype.checkImagesExist=function(){return 2===this.getImages().length},a.prototype.getImages=function(){var a=this.getHandler().querySelectorAll("img");return 0===a.length?this.getHandler().querySelectorAll(".layer"):a},a.prototype.bindEvents=function(){var a=this;"mousedown touchstart".split(" ").forEach(function(b){a.getDragHandler().addEventListener(b,function(b){b.preventDefault(),b.stopPropagation(),a.markDragStart()})}),"mouseup touchend".split(" ").forEach(function(b){document.addEventListener(b,function(){a.markDragStop()})}),"mousemove touchmove".split(" ").forEach(function(b){a.getContainer().addEventListener(b,function(c){if(a.isDragStart()){var d="touchmove"===b?c.changedTouches[0].clientX:c.clientX;a.update(d)}})})},a.prototype.getHandler=function(){return this.handler},a.prototype.getContainer=function(){return this.getHandler().querySelector(".before-after")},a.prototype.getDragHandler=function(){return this.getHandler().querySelector(".drag-handler")},a.prototype.getDragHandlerOffsetX=function(){return this.getDragHandler().offsetLeft},a.prototype.getPositionByOffset=function(a){var b=100*(a-this.getHandlerOffsetX())/this.getImagesWidth();return b<0?0:b>100?100:b},a.prototype.update=function(a){var b=this.getPositionByOffset(a);this.updateDragHandlerPosition(b),this.updatePhotoBefore(b)},a.prototype.updateDragHandlerPosition=function(a){this.getDragHandler().style.left=a+"%"},a.prototype.updatePhotoBefore=function(a){var b=this.getPhotoBefore(),c=this.getPhotoBeforeImage(),d=100-a;b.style.transform="translate("+-1*d+"%)",c.style.transform="translate("+d+"%)"},a.prototype.getPhotoBefore=function(){return this.getHandler().querySelector(".photo.before")},a.prototype.getPhotoBeforeImage=function(){var a=this.getPhotoBefore().querySelector("img");return null===a?this.getPhotoBefore().querySelector(".layer"):a},a.prototype.getImagesWidth=function(){return this.getHandler().querySelector(".before-after").offsetWidth},a.prototype.getHandlerOffsetX=function(){return this.getHandler().getBoundingClientRect().left},a.prototype.markDragStart=function(){this.dragStart=!0},a.prototype.markDragStop=function(){this.dragStart=!1},a.prototype.isDragStart=function(){return!0===this.dragStart},a}();